<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Admin Dashboard â€” MercyCourt Montessori School</title>
  <link rel="stylesheet" href="admin.css">
  <link href="https://fonts.googleapis.com/css2?family=Bubblegum+Sans&family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>

  <!-- ADMIN LOGIN PAGE -->
  <div id="adminLoginPage" class="login-container">
    <div class="login-box">
      <div class="login-header">
        <img src="mercy.jpg" alt="School Logo" class="login-logo">
        <h1>Admin Dashboard</h1>
        <p>MercyCourt Montessori School</p>
      </div>
     <form id="adminLoginForm" autocomplete="off">
  <div class="form-group">
    <label for="adminUsername">Username</label>
    <input type="text" id="adminUsername" name="adminuser" placeholder="Enter username" autocomplete="off" required>
  </div>
  <div class="form-group">
    <label for="adminPassword">Password</label>
    <div class="password-wrapper">
      <input type="password" id="adminPassword" name="adminpass" placeholder="Enter password" autocomplete="new-password" required>
      <button type="button" class="toggle-password" onclick="togglePassword('adminPassword', this)">
        ğŸ‘ï¸
      </button>
    </div>
  </div>
  <button type="submit" class="btn btn-primary btn-full">Login</button>
</form>
    </div>
  </div>

  <!-- MAIN DASHBOARD (hidden until login) -->
  <div id="dashboardPage" class="dashboard" style="display: none;">
    
    <!-- SIDEBAR -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <img src="mercy.jpg" alt="Logo" class="sidebar-logo">
        <h2>Admin Panel</h2>
      </div>
      <nav class="sidebar-nav">
        <button class="nav-btn active" data-section="overview">
          <span class="nav-icon">ğŸ“Š</span> Overview
        </button>
        <button class="nav-btn" data-section="students">
          <span class="nav-icon">ğŸ‘¨â€ğŸ“</span> Students
        </button>
        <button class="nav-btn" data-section="quizzes">
          <span class="nav-icon">ğŸ“</span> Manage Quizzes
        </button>
        <button class="nav-btn" data-section="results">
          <span class="nav-icon">ğŸ“ˆ</span> Results
        </button>
        <button class="nav-btn" data-section="settings">
          <span class="nav-icon">âš™ï¸</span> Settings
        </button>
      </nav>
      <div class="sidebar-footer">
        <button id="logoutBtn" class="btn btn-danger btn-full">ğŸšª Logout</button>
      </div>
    </aside>

    <!-- MAIN CONTENT -->
    <main class="main-content">
      
      <!-- TOP BAR -->
      <header class="topbar">
        <h1 id="sectionTitle">Overview</h1>
        <div class="topbar-right">
          <span class="admin-name">ğŸ‘¤ Admin</span>
          <span class="current-date" id="currentDate"></span>
        </div>
      </header>

      <!-- CONTENT SECTIONS -->
      <div class="content">

        <!-- OVERVIEW SECTION -->
        <section id="overviewSection" class="section active">
          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-icon">ğŸ‘¨â€ğŸ“</div>
              <div class="stat-info">
                <h3 id="totalStudents">0</h3>
                <p>Total Students</p>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon">ğŸ“</div>
              <div class="stat-info">
                <h3 id="totalQuizzes">0</h3>
                <p>Total Quizzes</p>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon">âœ…</div>
              <div class="stat-info">
                <h3 id="totalAttempts">0</h3>
                <p>Quiz Attempts</p>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon">ğŸ“ˆ</div>
              <div class="stat-info">
                <h3 id="avgScore">0%</h3>
                <p>Average Score</p>
              </div>
            </div>
          </div>

          <div class="card">
            <h2>ğŸ“‹ Recent Quiz Attempts</h2>
            <div class="table-container">
              <table id="recentResultsTable">
                <thead>
                  <tr>
                    <th>Student Name</th>
                    <th>Class</th>
                    <th>Exam No.</th>
                    <th>Topic</th>
                    <th>Score</th>
                    <th>Date</th>
                  </tr>
                </thead>
                <tbody id="recentResultsBody">
                  <tr>
                    <td colspan="6" class="no-data">No results yet</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </section>

        <!-- STUDENTS SECTION -->
        <section id="studentsSection" class="section">
          <div class="section-header">
            <h2>ğŸ‘¨â€ğŸ“ Student Management</h2>
            <button id="addStudentBtn" class="btn btn-primary">+ Add Student</button>
          </div>
          
          <div class="card">
            <div class="search-bar">
              <input type="text" id="studentSearch" placeholder="ğŸ” Search students...">
              <select id="studentClassFilter">
                <option value="">All Classes</option>
                <option value="Grade 1">Grade 1</option>
                <option value="Grade 2">Grade 2</option>
                <option value="Grade 3">Grade 3</option>
                <option value="Grade 4">Grade 4</option>
                <option value="Grade 5">Grade 5</option>
              </select>
            </div>
            <div class="table-container">
              <table id="studentsTable">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Class</th>
                    <th>Exam No.</th>
                    <th>Date Added</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="studentsBody">
                  <tr>
                    <td colspan="5" class="no-data">No students registered</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </section>

        <!-- QUIZZES SECTION -->
        <section id="quizzesSection" class="section">
          <div class="section-header">
            <h2>ğŸ“ Quiz Management</h2>
            <button id="addQuizBtn" class="btn btn-primary">+ Add Question</button>
          </div>

          <div class="card">
            <div class="search-bar">
              <select id="quizClassSelect">
                <option value="">Select Class</option>
                <option value="Grade 1">Grade 1</option>
                <option value="Grade 2">Grade 2</option>
                <option value="Grade 3">Grade 3</option>
                <option value="Grade 4">Grade 4</option>
                <option value="Grade 5">Grade 5</option>
              </select>
              <select id="quizTermSelect">
                <option value="">Select Term</option>
                <option value="1st">1st Term</option>
                <option value="2nd">2nd Term</option>
                <option value="3rd">3rd Term</option>
              </select>
              <button id="loadQuizBtn" class="btn btn-secondary">Load Quiz</button>
            </div>

            <div id="quizDetails" style="display: none;">
              <div class="quiz-info">
                <div class="form-group">
                  <label>Topic Title:</label>
                  <input type="text" id="quizTopic" placeholder="Enter topic title">
                </div>
                <div class="form-group">
                  <label>Duration (minutes):</label>
                  <input type="number" id="quizDuration" placeholder="25" min="1">
                </div>
                <button id="saveQuizSettings" class="btn btn-primary">Save Settings</button>
              </div>

              <h3>Questions (<span id="questionCount">0</span>)</h3>
              <div id="questionsContainer"></div>
            </div>
          </div>
        </section>

        <!-- RESULTS SECTION -->
        <section id="resultsSection" class="section">
          <div class="section-header">
            <h2>ğŸ“ˆ All Results</h2>
            <div class="section-actions">
              <button id="exportResultsBtn" class="btn btn-secondary">ğŸ“¥ Export CSV</button>
              <button id="clearResultsBtn" class="btn btn-danger">ğŸ—‘ï¸ Clear All</button>
            </div>
          </div>

          <div class="card">
            <div class="search-bar">
              <input type="text" id="resultSearch" placeholder="ğŸ” Search by name or exam no...">
              <select id="resultClassFilter">
                <option value="">All Classes</option>
                <option value="Grade 1">Grade 1</option>
                <option value="Grade 2">Grade 2</option>
                <option value="Grade 3">Grade 3</option>
                <option value="Grade 4">Grade 4</option>
                <option value="Grade 5">Grade 5</option>
              </select>
              <select id="resultTermFilter">
                <option value="">All Terms</option>
                <option value="1st">1st Term</option>
                <option value="2nd">2nd Term</option>
                <option value="3rd">3rd Term</option>
              </select>
            </div>
            <div class="table-container">
              <table id="resultsTable">
                <thead>
                  <tr>
                    <th>Student Name</th>
                    <th>Class</th>
                    <th>Exam No.</th>
                    <th>Topic</th>
                    <th>Score</th>
                    <th>Percentage</th>
                    <th>Date</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="resultsBody">
                  <tr>
                    <td colspan="8" class="no-data">No results yet</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </section>

        <!-- SETTINGS SECTION -->
        <section id="settingsSection" class="section">
          <div class="section-header">
            <h2>âš™ï¸ Settings</h2>
          </div>

          <div class="settings-grid">
            <div class="card">
              <h3>ğŸ” Change Admin Password</h3>
              <form id="changePasswordForm">
                <div class="form-group">
  <label>Current Password</label>
  <div class="password-wrapper">
    <input type="password" id="currentPassword" required>
    <button type="button" class="toggle-password" onclick="togglePassword('currentPassword', this)">
      ğŸ‘ï¸
    </button>
  </div>
</div>
<div class="form-group">
  <label>New Password</label>
  <div class="password-wrapper">
    <input type="password" id="newPassword" required>
    <button type="button" class="toggle-password" onclick="togglePassword('newPassword', this)">
      ğŸ‘ï¸
    </button>
  </div>
</div>
<div class="form-group">
  <label>Confirm New Password</label>
  <div class="password-wrapper">
    <input type="password" id="confirmPassword" required>
    <button type="button" class="toggle-password" onclick="togglePassword('confirmPassword', this)">
      ğŸ‘ï¸
    </button>
  </div>
</div>
                <button type="submit" class="btn btn-primary">Update Password</button>
              </form>
            </div>

            <div class="card">
              <h3>ğŸ”‘ Student Quiz Password</h3>
              <form id="quizPasswordForm">
                <div class="form-group">
                  <label>Current Quiz Password</label>
                  <input type="text" id="currentQuizPassword" readonly>
                </div>
                <div class="form-group">
                  <label>New Quiz Password</label>
                  <input type="text" id="newQuizPassword" placeholder="Enter new password">
                </div>
                <button type="submit" class="btn btn-primary">Update Quiz Password</button>
              </form>
            </div>

            <div class="card">
              <h3>ğŸ« School Information</h3>
              <form id="schoolInfoForm">
                <div class="form-group">
                  <label>School Name</label>
                  <input type="text" id="schoolName" value="MercyCourt Montessori School">
                </div>
                <div class="form-group">
                  <label>School Address</label>
                  <textarea id="schoolAddress" rows="2" placeholder="Enter school address"></textarea>
                </div>
                <button type="submit" class="btn btn-primary">Save Changes</button>
              </form>
            </div>

            <div class="card">
              <h3>ğŸ’¾ Data Management</h3>
              <p>Backup or restore your quiz data.</p>
              <div class="btn-group">
                <button id="backupDataBtn" class="btn btn-secondary">ğŸ“¤ Backup Data</button>
                <label class="btn btn-secondary">
                  ğŸ“¥ Restore Data
                  <input type="file" id="restoreDataInput" accept=".json" style="display: none;">
                </label>
              </div>
            </div>
          </div>
        </section>

      </div>
    </main>
  </div>

  <!-- MODAL FOR ADDING/EDITING -->
  <div id="modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="modalTitle">Add New</h2>
        <button id="closeModalBtn" class="close-btn">&times;</button>
      </div>
      <div class="modal-body" id="modalBody">
        <!-- Dynamic content will be inserted here -->
      </div>
    </div>
  </div>
<script src="shared.js"></script>
<script type="module" src="admin.js"></script>
</body>
</html>